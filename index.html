<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <style>
        #block{
            display: grid;
            grid-template-columns: repeat(5, 50px);
            grid-template-rows: repeat(5, 50px);
            gap: 3px;
        }
        .singleBlock{
            border: 1px solid #000000;
            width: 50px;
            height: 50px;
            background: #ffffff;
        }
    </style>
    <div id="block">

    </div>
    <div class="singleBlock" id="original">

    </div>
    <label for="colorPicker">Choose Color:</label>
    <select id="colors">
        <option value="#ffffff">White</option>
        <option value="#000000">Black</option>
        <option value="#ff0000">Red</option>
        <option value="#00ff00">Green</option>
        <option value="#0000ff">Blue</option>
        <option value="#ffff00">Yellow</option>
        <option value="#00ffff">Cyan</option>
        <option value="#ff00ff">Magenta</option>
    </select>
    <br>
    <label for="x">Width:</label>
    <input type="number" id="x" value="5" min="1" max="20">
    <label for="y">Height:</label>
    <input type="number" id="y" value="5" min="1" max="20">
    <button id="resize">Resize Grid</button>
    <button id="save">Save Image</button>
    <script>
        var globalColor = "#ffffff"
        function changeColor(id)
        {
            document.getElementById(id).style.background = globalColor
            document.getElementById(id).setAttribute("data-color", colors[globalColor])
        }
        for (let y = 0; y < 5; y++) {
            for (let x = 0; x < 5; x++) {
                var a = document.getElementById("block").appendChild(document.getElementById("original").cloneNode())
                a.setAttribute("id", "" + y.toString() + ":" + x.toString())

                a.addEventListener("click", (e)=>changeColor("" + y.toString() + ":" + x.toString()) )
            }
        }
        document.getElementById("original").style.display = "none"
        document.getElementById("colors").addEventListener("change", (e)=>{
            globalColor = e.target.value
        })
        document.getElementById("resize").addEventListener("click", (e)=>{
            var x = parseInt(document.getElementById("x").value)
            var y = parseInt(document.getElementById("y").value)
            var block = document.getElementById("block")
            document.getElementById("original").style.display = "block"
            block.innerHTML = ""
            block.style.gridTemplateColumns = "repeat(" + x + ", 50px)"
            block.style.gridTemplateRows = "repeat(" + y + ", 50px)"
            for (let j = 0; j < y; j++) {
                for (let i = 0; i < x; i++) {
                    var a = block.appendChild( document.getElementById("original").cloneNode() )
                    a.setAttribute("id", "" + j.toString() + ":" + i.toString())

                    a.addEventListener("click", (e)=>changeColor("" + j.toString() + ":" + i.toString()) )
                }
            }
            document.getElementById("original").style.display = "none"

        })
        var colors = {
            "#ffffff": 0,
            "#000000": 1,
            "#ff0000": 2,
            "#00ff00": 3,
            "#0000ff": 4,
            "#ffff00": 5,
            "#00ffff": 6,
            "#ff00ff": 7
        }
        document.getElementById("save").addEventListener("click", (e)=>{
            var x = parseInt(document.getElementById("x").value)
            var y = parseInt(document.getElementById("y").value)
            var data = []
            for (let j = 0; j < y; j++) {
                for (let i = 0; i < x; i++) {   
                    var block = document.getElementById("" + j + ":" + i)
                    data.push( block.getAttribute("data-color") || "0" )
                }
                data.push(":")
            }
            console.log(data.join(""))
        })
    </script>
</body>
</html>